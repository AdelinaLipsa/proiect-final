"use strict";function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(window).scroll(function(){100<$(window).scrollTop()?$("#back2Top").fadeIn():$("#back2Top").fadeOut()}),$(document).ready(function(){$("#back2Top").click(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},"slow"),!1})});var database={};function initializeCart(){cart=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):{}}function loader(){document.querySelector(".loader").innerHTML="<img src='https://cdn.dribbble.com/users/189524/screenshots/2822794/silhouette-solo-loader-dribbble_v2.gif' class='loaderImg'>"}function ajaxPromise(r,a,o){return new Promise(function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&(200==this.status?e(this.responseText):t(this))},n.open(a,r,!0),n.send(o)})}function getPhones(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(ajaxPromise("https://proiect-final-f676e.firebaseio.com/products.json","GET"));case 2:t=e.sent,database=JSON.parse(t),syncCart(),draw(database),document.querySelector(".loader").innerHTML="",document.querySelector(".loader").style.display="none";case 8:case"end":return e.stop()}})}function draw(e){var t='<div class="row justify-content-center no-gutters">';for(var n in e){var r=e[n].image.split(" ");t+='\n                <div class="col-12 col-md-6 col-lg-4 p-5">\n                    <div class="card h-100" id="background-shadow">\n                        <img class="card-img-top img-fluid w-75 mx-auto" src="../imagini/'.concat(r[0],'">\n                        \n                        <div class="card-body text-center d-flex flex-column">\n                            <h3 class="card-title">').concat(e[n].name,'</h3>\n                            <div class="mt-auto">\n                                <p class="card-text"><b>PRICE:&nbsp</b>').concat(e[n].price,'</p>\n                                <p class="card-text "><b>In stock:&nbsp</b> ').concat(e[n].stock,'</p>\n                            </div>\n                        </div>\n                        <div class="card-footer text-center">\n                            <button id="').concat(n,'" class="detailsBtn">Details</button>\n                        </div>\n                                               \n                     </div>\n                </div>\n        ')}t+="</div>",document.querySelector("#content").innerHTML=t}function itemCounter(){var e=0;if(0<Object.keys(cart).length){for(var t in cart)e+=cart[t].quantity;document.querySelector("#itemCounter").innerHTML=e}}function syncCart(){for(var e in database)cart[e]&&(cart[e]=_objectSpread({},cart[e],{},database[e]));localStorage.setItem("cart",JSON.stringify(cart))}function search(e){var t={},n=document.querySelector("#input").value.trim().toLowerCase();if(n){for(var r in database){database[r].name.toLowerCase().split(/[\s,]+/).includes(n)&&(t[r]=database[r])}0<Object.keys(t).length?(draw(t),document.querySelector("#input").value="",document.querySelector("#input").setAttribute("placeholder","Search")):(document.querySelector("#input").value="",document.querySelector("#input").setAttribute("placeholder","Product not found!"),setTimeout(function(){document.querySelector("#input").setAttribute("placeholder","Search")},2e3),draw(database))}}loader(),getPhones(),initializeCart(),itemCounter(),document.addEventListener("click",function(e){e.target&&"detailsBtn"==e.target.classList&&window.open("phone_details.html?id=".concat(event.target.id),"_self")}),document.querySelector("#searchBtn").addEventListener("click",search),document.querySelector("#input").addEventListener("keyup",function(e){e.preventDefault(),"13"==(e=e||window.event).keyCode&&search()});