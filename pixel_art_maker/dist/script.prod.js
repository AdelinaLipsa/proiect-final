"use strict";$(document).ready(function(){$("#size-picker");var n,i,c=$("#my-node"),o=$("body"),e=!1,a=$("#grid-color"),t=$("#colorPicker"),r=!1,l="paintBrush",s=30,d=30,u=$(".eight"),p=$(".twelve"),f=$(".sixteen"),m=$(".thirtytwo");function v(){c.empty();for(var o=0;o<d;o++){c.append($("<tr />").attr("data-row",o)),n=c.children().last();for(var e=0;e<s;e++)n.append($('<td bgcolor="white"></td>').attr("data-col",e))}}function k(o){o.css("background-color",t.val())}c.on("mousedown","td",function(o){o.preventDefault(),r=!0}),o.on("mouseup",function(){r=!1}),o.on("click","#paint-brush",function(){removeCurrentTool(),l="paintBrush",$("#paint-brush").addClass("tool-selected")}),o.on("click","#paint-bucket",function(){removeCurrentTool(),l="paintBucket",$("#paint-bucket").addClass("tool-selected")}),o.on("click","#eye-dropper",function(){removeCurrentTool(),l="eyeDropper",$("#eye-dropper").addClass("tool-selected")}),o.on("click","#eraser",function(){removeCurrentTool(),l="eraser",$("#eraser").addClass("tool-selected")}),o.on("click","#sample-grape",function(){t.val("#B38CB4")}),o.on("click","#sample-brown",function(){t.val("#B7918C")}),o.on("click","#sample-khaki",function(){t.val("#C5A48A")}),o.on("click","#sample-burlywood",function(){t.val("#DDC67B")}),o.on("click","#sample-sunny",function(){t.val("#F8F272")}),o.on("click","#sample-discoball",function(){t.val("#2EC0F9")}),o.on("click","#sample-bluejeans",function(){t.val("#67AAF9")}),o.on("click","#sample-blueeyes",function(){t.val("#9BBDF9")}),o.on("click","#sample-blue",function(){t.val("#C4E0F9")}),o.on("click","#sample-mist",function(){t.val("#E3DFFF")}),o.on("click","#sample-thistle",function(){t.val("#D3C0CD")}),o.on("click","#sample-tuscany",function(){t.val("#B19994")}),o.on("click","#sample-shadow",function(){t.val("#937666")}),o.on("click","#sample-arsenic",function(){t.val("#3D3A4B")}),o.on("click","#sample-rose",function(){t.val("#B95F89")}),a.change(function(){$("table").css("border-color",a.val()),$("tr").css("border-color",a.val()),$("td").css("border-color",a.val())}),o.on("click","#remove-grid",function(){(e=!e)?($("table").css("border","none"),$("tr").css("border","none"),$("td").css("border","none")):($("table").css("border","1px solid "+a.val()),$("tr").css("border","1px solid "+a.val()),$("td").css("border","1px solid "+a.val()))}),c.on("mousemove",function(o){if(r){var e=$(o.target).closest("td");"paintBrush"===l?k(e):"eraser"===l&&e.css("background-color","white")}}),c.on("click","td",function(o){var e=$(o.target).closest("td");switch(l){case"paintBrush":k(e);break;case"paintBucket":i=e.css("background-color"),function o(e){k(e);var n=e.data("col");var c=e.parent().data("row");if(0<n){var a=e.prev();a.css("background-color")==i&&o(a)}if(n<s){var t=e.next();t.css("background-color")==i&&o(t)}if(0<c){var r=e.parent().prev().children().eq(n);r.css("background-color")==i&&o(r)}if(c<d){var l=e.parent().next().children().eq(n);l.css("background-color")==i&&o(l)}}(e);break;case"eyeDropper":removeCurrentTool(),function(o){var e=o.css("background-color");t.val(function(o){return"#"+o.split("(")[1].split(")")[0].split(",").map(function(o){return 1==(o=parseInt(o).toString(16)).length?"0"+o:o}).join("")}(e))}(e),l="paintBrush",$("#paint-brush").addClass("tool-selected");break;case"eraser":e.css("background-color","white")}}),u.on("click",function(){s=d=8,v()}),p.on("click",function(){s=d=12,v()}),f.on("click",function(){s=d=16,v()}),m.on("click",function(){s=d=32,v()}),$(".foo").click(function(){html2canvas($("#my-node"),{onrendered:function(o){var e=document.createElement("a");e.href=o.toDataURL("image/png"),e.download="image.png",e.click()}})}),$(".secondFoo").click(function(){html2canvas($("#my-node"),{onrendered:function(o){var e=document.createElement("a");e.href=o.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),e.download="image.jpg",e.click()}})}),$(".thirdFoo").click(function(){html2canvas($("#my-node"),{onrendered:function(o){var e=document.createElement("a");e.href=o.toDataURL("image/gif").replace("image/gif","image/octet-stream"),e.download="image.gif",e.click()}})})});